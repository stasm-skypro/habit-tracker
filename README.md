# Трекер привычек

## Описание приложения

Проект представляет собой web-приложение для трекера привычек.

Суть методики приобретения полезных привычек описана [**тут**](https://www.google.com/amp/s/lifehacker.ru/pravilo-dvux-minut/amp/).

Пользователь имеет список полезных привычек, которые он хочет приобрести. Полезные привычки имеют расписание выполнения. Для стимулирования полезной привычки есть либо поощрение, либо приятная привычка.

Приложение решает проблему приобретения полезных привычек. Предназначено для всех, кто хочет начать делать что-то полезное.

Приложение позволяет отслеживать полезные привычки и напоминать о них за 15 минут.

Авторизованный и зарегистрированный пользователь имеет полный доступ к своим привычкам, а также может просматривать публичные привычки других пользователей без возможности их редактирования.

Неавторизованный (незарегистрированный) пользователь имеет доступ только к странице приветствия.

## Возможности

- Регистрация пользователя производится по адресу электронной почты и паролю.
- Панель администратора.
- API для доступа к данным.


## Технологии

* Django 5.1
* PostgreSQL
* Docker
* Celery
* Nginx

 ## Переменные окружения

- SECRET_KEY=токен django-приложения
- ALLOWED_HOSTS=список доступных доменов
- DB_NAME=имя базы данных
- DB_USER=имя пользователя базы данных
- DB_PASSWORD=пароль пользователя базы данных
- DB_HOST=хост базы данных
- DB_PORT=порт базы данных
- TELEGRAM_BOT_TOKEN=токен чата пользователя
- CELERY_BROKER_URL=адрес брокера
- CELERY_RESULT_BACKEND=адрес хранилища результатов

## API
- ```POST /api/user/register/ —  регистрация пользователя```

- ```POST /api/user/login/ —  вход пользователя```

- ```GET /api/habits/ — список привычек текущего пользователя (с пагинацией)```

- ```POST /api/habits/ — создание```

- ```GET /api/habits/{id}/ — просмотр```

- ```PUT /api/habits/{id}/ — полное обновление```

- ```PATCH /api/habits/{id}/ — частичное обновление```

- ```DELETE /api/habits/{id}/ — удаление```

## Github actions

Всего использовано 4 jobs:

- lint - Линтинг кода. Хотя мне кажется, что форматирование и линтинг лучше делать на месте. В проекте настроен прекомит, создан .pre-commit-config.yaml и настроены хуки. Прекомит запускает black, flake8, mypy, проверяет чтобы в гит не пушились файлы больше 500К, удалает лишние пробелы и проверяет, чтобы файлы заканчивается одной пустой строкой. Таким обраом в гитхаб попадают уже отформатированные и проверенные линтерами файлы.

- test - Запуск тестов. Для проекта созданы 12 тестов.

- build - Создание контейнеров. Всего создаётся 6 контейнеров:
  * db - БД;
  * redis - «очередь заданий», которые должен выполнить Celery;
  * web - backend с приложением habit tracker;
  * celery - сервис для отложенных задач - отправки сообщения клиенту в телеграм с напоминвением о полезной привычке;
  * celery-beat - сервис для периодических задач - напрминаниет о полезной привычке за 15 минут;
  * nginx - фронтенд веб-сервер;

- deploy - деплой приложения на удалённом сервере YC.

## Результат
Проект доступен по адресу: http://5.35.108.203/

Например, ручка для входа пользователя доступна по адресу: http://5.35.108.203/api/user/login/

(фронт-энд не написан, поэтому сработает DRF заглушка, которая откроет окно для ввода логина и пароля)
